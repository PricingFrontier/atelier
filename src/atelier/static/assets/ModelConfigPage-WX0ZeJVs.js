import{a as e,i as t,l as n,n as r,o as i,r as a,t as o}from"./index-B0a_5E0S.js";import{a as s,i as c,o as l,s as u,t as ee}from"./PageBackground-_puMC_T0.js";import{a as te,i as ne,o as re,r as ie,t as d}from"./utils-2A0Txw86.js";import{n as ae,t as oe}from"./git-branch-DGWGweAJ.js";var f=u(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),se=u(`circle-x`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),ce=u(`database`,[[`ellipse`,{cx:`12`,cy:`5`,rx:`9`,ry:`3`,key:`msslwz`}],[`path`,{d:`M3 5V19A9 3 0 0 0 21 19V5`,key:`1wlel7`}],[`path`,{d:`M3 12A9 3 0 0 0 21 12`,key:`mv7ke4`}]]),le=u(`file-spreadsheet`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M8 13h2`,key:`yr2amv`}],[`path`,{d:`M14 13h2`,key:`un5t4a`}],[`path`,{d:`M8 17h2`,key:`2yhykz`}],[`path`,{d:`M14 17h2`,key:`10kma7`}]]),p=u(`layers`,[[`path`,{d:`M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z`,key:`zw3jo`}],[`path`,{d:`M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12`,key:`1wduqc`}],[`path`,{d:`M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17`,key:`kqbvx6`}]]),ue=u(`pencil`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}],[`path`,{d:`m15 5 4 4`,key:`1mk7zo`}]]),m=u(`sigma`,[[`path`,{d:`M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2`,key:`wuwx1p`}]]),de=u(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),h=u(`weight`,[[`circle`,{cx:`12`,cy:`5`,r:`3`,key:`rqqgnr`}],[`path`,{d:`M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z`,key:`56o5sh`}]]),g=n(e(),1),_=n(i(),1);const v={gaussian:`identity`,poisson:`log`,binomial:`logit`,gamma:`log`,tweedie:`log`,quasipoisson:`log`,quasibinomial:`logit`,negbinomial:`log`},fe=[{value:`poisson`,label:`Poisson`,description:`Count data, frequency models`},{value:`gamma`,label:`Gamma`,description:`Positive continuous, severity models`},{value:`tweedie`,label:`Tweedie`,description:`Mixed zero-and-positive, pure premium`},{value:`gaussian`,label:`Gaussian`,description:`Normal distribution, continuous`},{value:`binomial`,label:`Binomial`,description:`Binary outcome, propensity models`},{value:`negbinomial`,label:`Negative Binomial`,description:`Overdispersed counts`},{value:`quasipoisson`,label:`Quasi-Poisson`,description:`Overdispersed counts (quasi)`},{value:`quasibinomial`,label:`Quasi-Binomial`,description:`Overdispersed binary (quasi)`}],pe=[{value:`log`,label:`Log`},{value:`identity`,label:`Identity`},{value:`logit`,label:`Logit`},{value:`inverse`,label:`Inverse`}];var y=o();function b({children:e,delay:t=0,className:n=``,zIndex:r}){return(0,y.jsx)(`div`,{className:d(`relative`,n),style:{animation:`fadeUp 0.6s ease-out ${t}s both`,zIndex:r},children:e})}var x=`ModelConfig`;function S(){let e=t(),n=a().state,i=(0,_.useRef)(null),[o,u]=(0,_.useState)(!1);r.info(x,`render  hasPrev=${!!n}  prevProject=${n?.projectName??`none`}`);let[f,g]=(0,_.useState)(n?.projectId??null),[S,me]=(0,_.useState)(n?.projectName??``),[E,he]=(0,_.useState)(null),[D,ge]=(0,_.useState)(n?.columns??[]),[O,k]=(0,_.useState)(!1),[A,j]=(0,_.useState)(null),[M,_e]=(0,_.useState)(n?.datasetPath??null),[N,ve]=(0,_.useState)(n?.response??null),[P,ye]=(0,_.useState)(n?.family??null),[be,F]=(0,_.useState)(()=>{if(!n)return null;let e=v[n.family];return n.link===e?null:n.link}),[I,xe]=(0,_.useState)(n?.offset??null),[L,Se]=(0,_.useState)(n?.weights??null),[R,Ce]=(0,_.useState)(n?.split?.column??null),[z,B]=(0,_.useState)([]),[V,H]=(0,_.useState)(n?.split?.mapping??{}),[we,U]=(0,_.useState)(!1),[W,G]=(0,_.useState)([]),[Te,K]=(0,_.useState)([]),[Ee,q]=(0,_.useState)(new Set),[De,Oe]=(0,_.useState)(!1),J=(0,_.useRef)(null);(0,_.useEffect)(()=>{let e=e=>{let t=J.current;t&&(t.style.left=e.clientX+`px`,t.style.top=e.clientY+`px`)};return window.addEventListener(`mousemove`,e,{passive:!0}),()=>window.removeEventListener(`mousemove`,e)},[]),(0,_.useEffect)(()=>{if(!M||!N||!P){G([]),K([]);return}r.info(x,`validating data quality: response=${N} family=${P} offset=${I} weights=${L}`),Oe(!0),q(new Set),c(`/datasets/validate`,{dataset_path:M,response:N,family:P,offset:I??void 0,weights:L??void 0}).then(e=>{r.info(x,`validation result: ${e.errors.length} errors, ${e.warnings.length} warnings`),G(e.errors),K(e.warnings)}).catch(e=>{r.error(x,`validation call failed`,e),G([]),K([])}).finally(()=>Oe(!1))},[M,N,P,I,L]);let ke=(0,_.useRef)(!!n?.split);(0,_.useEffect)(()=>{if(!R||!M){r.debug(x,`split column cleared or no dataset`),B([]),H({});return}r.info(x,`fetching unique values for split column='${R}'`),U(!0),c(`/datasets/column-values`,{dataset_path:M,column:R}).then(e=>{r.info(x,`got ${e.values.length} unique values for '${R}'`,e.values),B(e.values),ke.current?ke.current=!1:H(Object.fromEntries(e.values.map(e=>[e,null])))}).catch(e=>r.error(x,`column values fetch FAILED for '${R}'`,e)).finally(()=>U(!1))},[R,M]);let Y=D.filter(e=>e.is_numeric),X=P?v[P]:null,Z=be??X,Ae=(0,_.useCallback)(async e=>{let t=e.target.files?.[0];if(t){r.info(x,`handleFile: name=${t.name}  size=${(t.size/1024/1024).toFixed(2)}MB  type=${t.type}`),he(t),j(null),k(!0);try{let e=await l(`/datasets/upload`,t);r.info(x,`upload success: ${e.columns.length} columns  path=${e.file_path}`),ge(e.columns),_e(e.file_path)}catch(e){r.error(x,`upload FAILED: ${e.message}`,e),j(e.message||`Failed to upload file`)}finally{k(!1)}}},[]),je=(0,_.useCallback)(e=>{e.preventDefault(),u(!1);let t=e.dataTransfer.files[0];if(t&&i.current){let e=new DataTransfer;e.items.add(t),i.current.files=e.files,i.current.dispatchEvent(new Event(`change`,{bubbles:!0}))}},[]),Me=e=>{r.info(x,`familyChange: ${P} -> ${e}`),ye(e),F(null)},Q=D.length>0,Ne=W.length>0,Pe=Te.filter(e=>!Ee.has(e.message)),$=Q&&N!==null&&P!==null&&S.trim().length>0&&!Ne,Fe=async()=>{r.info(x,`handleContinue: response=${N}  family=${P}  link=${Z}  offset=${I}  weights=${L}  splitCol=${R}`);let t=R?{column:R,mapping:V}:null,n={dataset_path:M,response:N,family:P,link:Z,offset:I,weights:L,split:t,columns:D},i=f;if(i)r.info(x,`updating config for existing project ${i}`),s(`/projects/${i}/config`,{config:n}).catch(e=>r.error(x,`update config FAILED`,e));else{r.info(x,`creating new project: name='${S.trim()}'`);try{i=(await c(`/projects`,{name:S.trim(),config:n})).id,g(i),r.info(x,`project created: id=${i}`)}catch(e){r.error(x,`create project FAILED`,e);return}}r.info(x,`navigating to /model  projectId=${i}`),e(`/model`,{state:{projectId:i,projectName:S.trim(),response:N,family:P,link:Z,offset:I,weights:L,columns:D,datasetPath:M,split:t}})},Ie=[{label:`Data`,icon:ce,done:Q},{label:`Response`,icon:m,done:N!==null},{label:`Distribution`,icon:oe,done:P!==null},{label:`Offset / Weights`,icon:h,done:I!==null||L!==null},{label:`Data Split`,icon:p,done:R!==null}];return(0,y.jsxs)(`div`,{className:`relative flex min-h-screen flex-col overflow-hidden bg-background`,children:[(0,y.jsx)(ee,{ref:J,gridOpacity:.1,gridMask:`radial-gradient(ellipse 50% 60% at 50% 30%, black 10%, transparent 100%)`,blobs:[{className:`absolute -top-32 left-[10%] h-[500px] w-[500px] animate-[auroraFloat1_12s_ease-in-out_infinite] rounded-full bg-blue-500 opacity-[0.04] blur-[120px]`},{className:`absolute top-[60%] right-[5%] h-[400px] w-[400px] animate-[auroraFloat2_14s_ease-in-out_infinite] rounded-full bg-violet-500 opacity-[0.04] blur-[120px]`}],cursorGlow:!0}),(0,y.jsxs)(`header`,{className:`sticky top-0 z-40 flex h-14 shrink-0 items-center gap-3 border-b border-white/[0.06] px-5 backdrop-blur-xl`,style:{background:`linear-gradient(180deg, hsl(0 0% 5% / 0.9) 0%, hsl(0 0% 4% / 0.8) 100%)`},children:[(0,y.jsxs)(`button`,{onClick:()=>e(`/`),className:`flex items-center gap-1.5 rounded-md px-2 py-1 text-sm text-muted-foreground transition-all hover:bg-white/[0.05] hover:text-foreground`,children:[(0,y.jsx)(re,{className:`h-4 w-4`}),`Back`]}),(0,y.jsx)(`div`,{className:`h-4 w-px bg-white/[0.08]`}),(0,y.jsx)(`span`,{className:`text-sm font-medium tracking-wide text-foreground`,children:`New Model`}),E&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(`div`,{className:`h-4 w-px bg-white/[0.08]`}),(0,y.jsxs)(`span`,{className:`flex items-center gap-1.5 text-sm text-muted-foreground`,children:[(0,y.jsx)(le,{className:`h-3.5 w-3.5 text-primary/60`}),E.name]})]})]}),(0,y.jsxs)(`div`,{className:`relative z-10 mx-auto flex w-full max-w-2xl flex-1 flex-col px-6 py-10`,children:[(0,y.jsx)(b,{delay:0,children:(0,y.jsx)(`div`,{className:`mb-10 flex items-center justify-center gap-1`,children:Ie.map((e,t)=>{let n=e.icon;return(0,y.jsxs)(`div`,{className:`flex items-center gap-1`,children:[t>0&&(0,y.jsx)(`div`,{className:d(`mx-1 h-px w-8 transition-colors duration-500`,e.done?`bg-primary/30`:`bg-white/[0.06]`)}),(0,y.jsxs)(`div`,{className:d(`flex items-center gap-1.5 rounded-full px-3 py-1.5 transition-all duration-500`,e.done?`bg-primary/10 text-primary`:`bg-white/[0.03] text-muted-foreground`),children:[(0,y.jsx)(`div`,{className:d(`flex h-5 w-5 items-center justify-center rounded-full text-[0.55rem] font-semibold transition-all duration-500`,e.done?`bg-primary/20 text-primary`:`bg-white/[0.06] text-muted-foreground`),children:e.done?(0,y.jsx)(te,{className:`h-3 w-3`}):(0,y.jsx)(n,{className:`h-3 w-3`})}),(0,y.jsx)(`span`,{className:`text-xs font-medium`,children:e.label})]})]},e.label)})})}),Q?(0,y.jsxs)(`div`,{className:`space-y-6`,children:[(0,y.jsx)(b,{delay:.02,zIndex:45,children:(0,y.jsxs)(C,{children:[(0,y.jsx)(w,{icon:ue,title:`Project Name`,subtitle:`A name for this modelling session.`}),(0,y.jsx)(`input`,{type:`text`,value:S,onChange:e=>me(e.target.value),placeholder:`e.g. Freq GLM – Motor 2025`,className:`w-full rounded-lg border border-white/[0.08] bg-white/[0.02] px-3 py-2.5 text-sm text-foreground placeholder:text-muted-foreground/30 transition-all focus:border-primary/30 focus:bg-white/[0.04] focus:outline-none focus:shadow-[0_0_0_1px_#3b82f620]`})]})}),(0,y.jsx)(b,{delay:.05,zIndex:40,children:(0,y.jsxs)(C,{children:[(0,y.jsx)(w,{icon:m,title:`Response variable`,subtitle:`The column your model will predict.`}),(0,y.jsx)(T,{value:N,onChange:ve,placeholder:`Select response column`,options:Y.map(e=>({value:e.name,label:e.name,badge:e.dtype}))})]})}),(0,y.jsx)(b,{delay:.15,zIndex:30,children:(0,y.jsxs)(C,{children:[(0,y.jsx)(w,{icon:oe,title:`Distribution`,subtitle:`Choose the error distribution and link function.`}),(0,y.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`label`,{className:`mb-1.5 block text-[0.7rem] font-semibold uppercase tracking-wider text-muted-foreground/70`,children:`Family`}),(0,y.jsx)(T,{value:P,onChange:e=>Me(e),placeholder:`Select family`,options:fe.map(e=>({value:e.value,label:e.label,description:e.description}))})]}),(0,y.jsxs)(`div`,{children:[(0,y.jsxs)(`label`,{className:`mb-1.5 block text-[0.7rem] font-semibold uppercase tracking-wider text-muted-foreground/70`,children:[`Link`,` `,X&&Z===X&&(0,y.jsx)(`span`,{className:`font-normal normal-case tracking-normal text-muted-foreground/40`,children:`(canonical)`})]}),(0,y.jsx)(T,{value:Z,onChange:e=>F(e===X?null:e),placeholder:`Select family first`,options:pe.map(e=>({value:e.value,label:e.label}))})]})]})]})}),(0,y.jsx)(b,{delay:.25,zIndex:20,children:(0,y.jsxs)(C,{children:[(0,y.jsx)(w,{icon:h,title:`Offset & Weights`,subtitle:`Optional. Offset is a fixed term in the linear predictor (e.g. log-exposure).`}),(0,y.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`label`,{className:`mb-1.5 block text-[0.7rem] font-semibold uppercase tracking-wider text-muted-foreground/70`,children:`Offset`}),(0,y.jsx)(T,{value:I,onChange:xe,placeholder:`None`,allowNone:!0,options:Y.filter(e=>e.name!==N).map(e=>({value:e.name,label:e.name}))})]}),(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`label`,{className:`mb-1.5 block text-[0.7rem] font-semibold uppercase tracking-wider text-muted-foreground/70`,children:`Weights`}),(0,y.jsx)(T,{value:L,onChange:Se,placeholder:`None`,allowNone:!0,options:Y.filter(e=>e.name!==N).map(e=>({value:e.name,label:e.name}))})]})]})]})}),(0,y.jsx)(b,{delay:.35,zIndex:15,children:(0,y.jsxs)(C,{children:[(0,y.jsx)(w,{icon:p,title:`Data Split`,subtitle:`Optional. Choose a column that identifies train / validation / holdout groups.`}),(0,y.jsxs)(`div`,{className:`space-y-4`,children:[(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`label`,{className:`mb-1.5 block text-[0.7rem] font-semibold uppercase tracking-wider text-muted-foreground/70`,children:`Split Column`}),(0,y.jsx)(T,{value:R,onChange:e=>Ce(e),placeholder:`None`,allowNone:!0,options:D.filter(e=>e.name!==N&&e.n_unique<=20).map(e=>({value:e.name,label:e.name,badge:`${e.n_unique} values`}))})]}),R&&z.length>0&&(0,y.jsxs)(`div`,{className:`space-y-2`,children:[(0,y.jsx)(`label`,{className:`block text-[0.7rem] font-semibold uppercase tracking-wider text-muted-foreground/70`,children:`Assign Values`}),(0,y.jsx)(`div`,{className:`rounded-lg border border-white/[0.06] bg-white/[0.01] divide-y divide-white/[0.04]`,children:z.map(e=>(0,y.jsxs)(`div`,{className:`flex items-center gap-3 px-3 py-2`,children:[(0,y.jsx)(`span`,{className:`min-w-0 flex-1 truncate text-sm text-foreground/80`,children:e}),(0,y.jsx)(`div`,{className:`flex gap-1`,children:[`train`,`validation`,`holdout`].map(t=>(0,y.jsx)(`button`,{onClick:()=>H(n=>({...n,[e]:n[e]===t?null:t})),className:d(`rounded-md px-2.5 py-1 text-[0.65rem] font-medium transition-all`,V[e]===t?t===`train`?`bg-blue-500/20 text-blue-400 ring-1 ring-blue-500/30`:t===`validation`?`bg-amber-500/20 text-amber-400 ring-1 ring-amber-500/30`:`bg-rose-500/20 text-rose-400 ring-1 ring-rose-500/30`:`bg-white/[0.03] text-muted-foreground/40 hover:bg-white/[0.06] hover:text-muted-foreground/60`),children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]},e))})]}),R&&we&&(0,y.jsx)(`p`,{className:`text-xs text-muted-foreground/50 animate-pulse`,children:`Loading values…`})]})]})}),(De||W.length>0||Pe.length>0)&&(0,y.jsx)(b,{delay:.4,zIndex:12,children:(0,y.jsxs)(`div`,{className:`space-y-2`,children:[De&&(0,y.jsx)(`p`,{className:`text-xs text-muted-foreground/50 animate-pulse`,children:`Checking data quality…`}),W.map((e,t)=>(0,y.jsxs)(`div`,{className:`flex items-start gap-3 rounded-xl border border-red-500/20 bg-red-500/[0.06] p-4`,children:[(0,y.jsx)(se,{className:`mt-0.5 h-4 w-4 shrink-0 text-red-400`}),(0,y.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,y.jsx)(`p`,{className:`text-sm font-medium text-red-300`,children:e.message}),e.suggestion&&(0,y.jsx)(`p`,{className:`mt-1 text-xs text-red-300/60`,children:e.suggestion})]})]},`err-${t}`)),Pe.map((e,t)=>(0,y.jsxs)(`div`,{className:`flex items-start gap-3 rounded-xl border border-amber-500/20 bg-amber-500/[0.06] p-4`,children:[(0,y.jsx)(ne,{className:`mt-0.5 h-4 w-4 shrink-0 text-amber-400`}),(0,y.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,y.jsx)(`p`,{className:`text-sm font-medium text-amber-300`,children:e.message}),e.suggestion&&(0,y.jsx)(`p`,{className:`mt-1 text-xs text-amber-300/60`,children:e.suggestion})]}),(0,y.jsx)(`button`,{onClick:()=>q(t=>new Set([...t,e.message])),className:`shrink-0 rounded-md p-1 text-amber-400/50 transition-colors hover:bg-amber-500/10 hover:text-amber-400`,children:(0,y.jsx)(ie,{className:`h-3.5 w-3.5`})})]},`warn-${t}`))]})}),(0,y.jsx)(b,{delay:.45,zIndex:10,children:(0,y.jsxs)(`div`,{className:`group relative pt-2`,children:[$&&(0,y.jsx)(`div`,{className:`absolute inset-x-0 -bottom-2 mx-auto h-16 w-3/4 rounded-full bg-primary/20 blur-2xl transition-opacity`}),(0,y.jsxs)(`button`,{disabled:!$,onClick:Fe,className:d(`relative flex w-full items-center justify-center gap-2 rounded-xl px-4 py-3.5 text-sm font-medium transition-all duration-300`,$?`bg-primary text-primary-foreground shadow-[0_0_24px_-4px_#3b82f640] hover:-translate-y-0.5 hover:shadow-[0_0_32px_-4px_#3b82f660]`:`cursor-not-allowed bg-white/[0.04] text-muted-foreground/40`),children:[`Continue to Model Builder`,(0,y.jsx)(ae,{className:d(`h-4 w-4 transition-transform`,$&&`group-hover:translate-x-0.5`)})]}),!$&&(0,y.jsx)(`p`,{className:`mt-3 text-center text-xs text-muted-foreground/40`,children:`Select a response variable to continue`})]})})]}):(0,y.jsxs)(b,{delay:.15,className:`flex flex-1 flex-col items-center justify-center`,children:[(0,y.jsx)(`h2`,{className:`mb-2 bg-gradient-to-br from-white to-zinc-400 bg-clip-text text-2xl font-light tracking-wide text-transparent`,children:`Select your data`}),(0,y.jsx)(`p`,{className:`mb-8 text-sm text-muted-foreground`,children:`Upload a CSV or Parquet file to get started.`}),(0,y.jsx)(`div`,{onDragOver:e=>{e.preventDefault(),u(!0)},onDragLeave:()=>u(!1),onDrop:je,onClick:()=>i.current?.click(),className:`group relative w-full max-w-md cursor-pointer`,children:(0,y.jsxs)(`div`,{className:d(`relative flex flex-col items-center justify-center rounded-xl border border-white/[0.06] bg-[#0c0c0e] p-16 transition-all`,o&&`border-primary/30 bg-[#0e0e12]`,!o&&!O&&`group-hover:border-white/[0.12] group-hover:bg-[#0e0e12]`),children:[(0,y.jsx)(`div`,{className:d(`mb-4 flex h-14 w-14 items-center justify-center rounded-xl transition-all duration-300`,O?`bg-primary/10 text-primary`:`bg-white/[0.04] text-muted-foreground/50 group-hover:bg-primary/10 group-hover:text-primary/70`),children:(0,y.jsx)(de,{className:d(`h-6 w-6`,O&&`animate-pulse`)})}),(0,y.jsx)(`p`,{className:`text-sm font-medium text-foreground/80`,children:O?`Reading file…`:o?`Drop file here`:`Drop CSV or Parquet file`}),(0,y.jsx)(`p`,{className:`mt-1.5 text-xs text-muted-foreground/50`,children:`or click to browse`}),(0,y.jsx)(`input`,{ref:i,type:`file`,accept:`.csv,.parquet`,className:`hidden`,onChange:Ae})]})}),A&&(0,y.jsx)(`p`,{className:`mt-4 text-sm text-destructive`,children:A})]})]})]})}function C({children:e}){return(0,y.jsx)(`div`,{className:`rounded-xl border border-white/[0.06] bg-white/[0.02] p-5 transition-colors hover:border-white/[0.1] hover:bg-white/[0.03]`,children:e})}function w({icon:e,title:t,subtitle:n}){return(0,y.jsxs)(`div`,{className:`mb-4 flex items-start gap-3`,children:[(0,y.jsx)(`div`,{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary`,children:(0,y.jsx)(e,{className:`h-4 w-4`})}),(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`h2`,{className:`text-sm font-semibold text-foreground`,children:t}),(0,y.jsx)(`p`,{className:`mt-0.5 text-xs text-muted-foreground/70`,children:n})]})]})}function T({value:e,onChange:t,options:n,placeholder:r=`Select…`,allowNone:i=!1}){let[a,o]=(0,_.useState)(!1),[s,c]=(0,_.useState)({left:0,width:0}),l=(0,_.useRef)(null),u=n.find(t=>t.value===e);return(0,y.jsxs)(`div`,{className:`relative`,children:[(0,y.jsxs)(`button`,{ref:l,onClick:()=>{if(!a&&l.current){let e=l.current.getBoundingClientRect();window.innerHeight-e.bottom<260?c({left:e.left,width:e.width,bottom:window.innerHeight-e.top+6}):c({left:e.left,width:e.width,top:e.bottom+6})}o(!a)},className:d(`flex w-full items-center justify-between rounded-lg border px-3 py-2.5 text-sm transition-all`,a?`border-primary/30 bg-white/[0.04] shadow-[0_0_0_1px_#3b82f620]`:`border-white/[0.08] bg-white/[0.02] hover:border-white/[0.12] hover:bg-white/[0.04]`),children:[(0,y.jsx)(`span`,{className:u?`text-foreground`:`text-muted-foreground/40`,children:u?u.label:r}),(0,y.jsx)(f,{className:d(`h-4 w-4 text-muted-foreground/50 transition-transform duration-200`,a&&`rotate-180`)})]}),a&&(0,g.createPortal)((0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(`div`,{className:`fixed inset-0 z-[999]`,onClick:()=>o(!1)}),(0,y.jsxs)(`div`,{className:`fixed z-[1000] max-h-60 overflow-y-auto rounded-lg border border-white/[0.08] bg-[#111113] p-1 shadow-2xl shadow-black/50`,style:{left:s.left,width:s.width,top:s.top,bottom:s.bottom,animation:`fadeUp 0.15s ease-out both`},children:[i&&(0,y.jsx)(`button`,{onClick:()=>{t(null),o(!1)},className:`flex w-full items-center rounded-md px-3 py-2 text-sm text-muted-foreground/60 transition-colors hover:bg-white/[0.06] hover:text-foreground`,children:`None`}),n.map(n=>(0,y.jsxs)(`button`,{onClick:()=>{t(n.value),o(!1)},className:d(`flex w-full items-center gap-2 rounded-md px-3 py-2 text-sm transition-all`,n.value===e?`bg-primary/10 text-primary`:`text-muted-foreground hover:bg-white/[0.06] hover:text-foreground`),children:[(0,y.jsx)(`span`,{className:`flex-1 text-left`,children:n.label}),n.badge&&(0,y.jsx)(`span`,{className:`rounded-md bg-white/[0.06] px-1.5 py-0.5 text-[0.6rem] font-medium text-muted-foreground/60`,children:n.badge}),n.description&&(0,y.jsx)(`span`,{className:`text-[0.65rem] text-muted-foreground/40`,children:n.description})]},n.value))]})]}),document.body)]})}export{S as default};